---
layout: post
title: "Valider le html dans AngularJs"
categories:
- astuces 
tags: [angularjs, html]

status: publish
type: post
published: true
meta:
  teaser: "Simple fonction pour valider le html avant son affichage dans AngularJs"
---

<blockquote>
<p>Sous AngularJS pour pouvoir afficher du html provenant d'une variable, il faut le marquer comme "trusted", sinon il ne l'affiche pas.</p>
</blockquote>

<p>Ce n'est pas la première fois que je rencontrais ce soucis, que j'avais toujours plus ou moins contourné.</p>

<p>J'ai trouvé plusieurs solutions sur <a href="http://stackoverflow.com/questions/19415394/with-ng-bind-html-unsafe-removed-how-do-i-inject-html">StackOverflow</a>, et comme souvent j'ai utilisé une des plus simples.</p>

<p> Dans mon controller parent de tout les autres controllers, j'ai ajouté la fonction  : </p>

{% highlight js %}
$scope.to_trusted = function(html_code) {
  return $sce.trustAsHtml(html_code);
}
{% endhighlight %}

<p>A noter qu'il faut instancier le service $sce dans ce controller. </p>

<p>et du coup dans ma vue, j'ai pu utiliser </p>

{% highlight html %}
<div ng-bind-html="to_trusted(invoice.form_be2bill)"></div>
{% endhighlight %}
